/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.13.0 - 2015-05-02
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.typeahead","ui.bootstrap.position","ui.bootstrap.bindHtml","ui.bootstrap.dropdown"]),angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var o=n.match(t);if(!o)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:o[3],source:e(o[4]),viewMapper:e(o[2]||o[1]),modelMapper:e(o[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,o,i,a,r){var p=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,d,s){var u,f=l.$eval(d.typeaheadMinLength)||1,h=l.$eval(d.typeaheadWaitMs)||0,m=l.$eval(d.typeaheadEditable)!==!1,g=t(d.typeaheadLoading).assign||angular.noop,v=t(d.typeaheadOnSelect),$=d.typeaheadInputFormatter?t(d.typeaheadInputFormatter):void 0,y=d.typeaheadAppendToBody?l.$eval(d.typeaheadAppendToBody):!1,w=l.$eval(d.typeaheadFocusFirst)!==!1,b=t(d.ngModel).assign,x=r.parse(d.typeahead),M=l.$new();l.$on("$destroy",function(){M.$destroy()});var C="typeahead-"+M.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":C});var k=angular.element("<div typeahead-popup></div>");k.attr({id:C,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(d.typeaheadTemplateUrl)&&k.attr("template-url",d.typeaheadTemplateUrl);var E=function(){M.matches=[],M.activeIdx=-1,c.attr("aria-expanded",!1)},O=function(e){return C+"-option-"+e};M.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",O(e))});var T=function(e){var t={$viewValue:e};g(l,!0),n.when(x.source(l,t)).then(function(n){var o=e===s.$viewValue;if(o&&u)if(n&&n.length>0){M.activeIdx=w?0:-1,M.matches.length=0;for(var i=0;i<n.length;i++)t[x.itemName]=n[i],M.matches.push({id:O(i),label:x.viewMapper(M,t),model:n[i]});M.query=e,M.position=y?a.offset(c):a.position(c),M.position.top=M.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else E();o&&g(l,!1)},function(){E(),g(l,!1)})};E(),M.query=void 0;var I,A=function(e){I=o(function(){T(e)},h)},q=function(){I&&o.cancel(I)};s.$parsers.unshift(function(e){return u=!0,e&&e.length>=f?h>0?(q(),A(e)):T(e):(g(l,!1),q(),E()),m?e:e?void s.$setValidity("editable",!1):(s.$setValidity("editable",!0),e)}),s.$formatters.push(function(e){var t,n,o={};return m||s.$setValidity("editable",!0),$?(o.$model=e,$(l,o)):(o[x.itemName]=e,t=x.viewMapper(l,o),o[x.itemName]=void 0,n=x.viewMapper(l,o),t!==n?t:e)}),M.select=function(e){var t,n,i={};i[x.itemName]=n=M.matches[e].model,t=x.modelMapper(l,i),b(l,t),s.$setValidity("editable",!0),s.$setValidity("parse",!0),v(l,{$item:n,$model:t,$label:x.viewMapper(l,i)}),E(),o(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==M.matches.length&&-1!==p.indexOf(e.which)&&(-1!=M.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(M.activeIdx=(M.activeIdx+1)%M.matches.length,M.$digest()):38===e.which?(M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1,M.$digest()):13===e.which||9===e.which?M.$apply(function(){M.select(M.activeIdx)}):27===e.which&&(e.stopPropagation(),E(),M.$digest()))}),c.bind("blur",function(){u=!1});var S=function(e){c[0]!==e.target&&(E(),M.$digest())};i.bind("click",S),l.$on("$destroy",function(){i.unbind("click",S),y&&H.remove(),k.remove()});var H=e(k)(M);y?i.find("body").append(H):c.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(o,i,a){var r=n(a.templateUrl)(o.$parent)||"template/typeahead/typeahead-match.html";e(r).then(function(e){t(e.trim())(o,function(e){i.replaceWith(e)})})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function o(e){return"static"===(n(e,"position")||"static")}var i=function(t){for(var n=e[0],i=t.offsetParent||n;i&&i!==n&&o(i);)i=i.offsetParent;return i||n};return{position:function(t){var n=this.offset(t),o={top:0,left:0},a=i(t[0]);a!=e[0]&&(o=this.offset(angular.element(a)),o.top+=a.clientTop-a.scrollTop,o.left+=a.clientLeft-a.scrollLeft);var r=t[0].getBoundingClientRect();return{width:r.width||t.prop("offsetWidth"),height:r.height||t.prop("offsetHeight"),top:n.top-o.top,left:n.left-o.left}},offset:function(n){var o=n[0].getBoundingClientRect();return{width:o.width||n.prop("offsetWidth"),height:o.height||n.prop("offsetHeight"),top:o.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:o.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,o){var i,a,r,p,l=n.split("-"),c=l[0],d=l[1]||"center";i=o?this.offset(e):this.position(e),a=t.prop("offsetWidth"),r=t.prop("offsetHeight");var s={center:function(){return i.left+i.width/2-a/2},left:function(){return i.left},right:function(){return i.left+i.width}},u={center:function(){return i.top+i.height/2-r/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(c){case"right":p={top:u[d](),left:s[c]()};break;case"left":p={top:u[d](),left:i.left-a};break;case"bottom":p={top:u[c](),left:s[d]()};break;default:p={top:i.top-r,left:s[d]()}}return p}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.bind("click",o),e.bind("keydown",i)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.unbind("click",o),e.unbind("keydown",i))};var o=function(e){if(n&&(!e||"disabled"!==n.getAutoClose())){var o=n.getToggleElement();if(!(e&&o&&o[0].contains(e.target))){var i=n.getElement();e&&"outsideClick"===n.getAutoClose()&&i&&i[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},i=function(e){27===e.which&&(n.focusToggleElement(),o())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document",function(e,t,n,o,i,a,r,p){var l,c=this,d=e.$new(),s=o.openClass,u=angular.noop,f=t.onToggle?n(t.onToggle):angular.noop,h=!1;this.init=function(o){c.$element=o,t.isOpen&&(l=n(t.isOpen),u=l.assign,e.$watch(l,function(e){d.isOpen=!!e})),h=angular.isDefined(t.dropdownAppendToBody),h&&c.dropdownMenu&&(p.find("body").append(c.dropdownMenu),o.on("$destroy",function(){c.dropdownMenu.remove()}))},this.toggle=function(e){return d.isOpen=arguments.length?!!e:!d.isOpen},this.isOpen=function(){return d.isOpen},d.getToggleElement=function(){return c.toggleElement},d.getAutoClose=function(){return t.autoClose||"always"},d.getElement=function(){return c.$element},d.focusToggleElement=function(){c.toggleElement&&c.toggleElement[0].focus()},d.$watch("isOpen",function(t,n){if(h&&c.dropdownMenu){var o=r.positionElements(c.$element,c.dropdownMenu,"bottom-left",!0);c.dropdownMenu.css({top:o.top+"px",left:o.left+"px",display:t?"block":"none"})}a[t?"addClass":"removeClass"](c.$element,s),t?(d.focusToggleElement(),i.open(d)):i.close(d),u(e,t),angular.isDefined(t)&&t!==n&&f(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){d.isOpen=!1}),e.$on("$destroy",function(){d.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,o){o.init(t)}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(e,t,n,o){o&&(o.dropdownMenu=t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,o){if(o){o.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){o.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(o.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);